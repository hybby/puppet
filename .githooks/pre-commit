# Requires bash, as it uses the [[ ]] syntax.
#
# If it's puppet code, lint it up.

# I we don't have puppet-lint, so just exit and leave them be.
which puppet-lint >/dev/null 2>&1 || exit

echo 'hello'

# Variables goes hither
declare -a FILES
IFS="
"
FILES=$(git diff --cached --name-only --diff-filter=ACM )

for file in ${FILES[@]}
do
  if [[ $file =~ \.*.pp$ ]]
  then
    puppet-lint --no-80chars-check --no-class_inherits_from_params_class-check --with-filename "$file"
    RC=$?
    if [ $RC -ne 0 ]
    then
      exit $RC
    fi
  fi
done

exit 0

